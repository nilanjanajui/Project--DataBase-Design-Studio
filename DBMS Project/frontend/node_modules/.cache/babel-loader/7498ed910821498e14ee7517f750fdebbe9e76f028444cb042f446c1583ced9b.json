{"ast":null,"code":"import { setupViewPortForSVG } from \"./chunk-SKB7J2MH.mjs\";\nimport { isLabelStyle, styles2String } from \"./chunk-UWXLY5YG.mjs\";\nimport { populateCommonDb } from \"./chunk-353BL4L5.mjs\";\nimport { cleanAndMerge } from \"./chunk-55PJQP7W.mjs\";\nimport { selectSvgElement } from \"./chunk-P3VETL53.mjs\";\nimport { __name, clear, configureSvgSize, defaultConfig_default, getAccDescription, getAccTitle, getConfig, getDiagramTitle, log, setAccDescription, setAccTitle, setDiagramTitle } from \"./chunk-3XYRH5AP.mjs\";\n\n// src/diagrams/treemap/db.ts\nvar TreeMapDB = class {\n  constructor() {\n    this.nodes = [];\n    this.levels = /* @__PURE__ */new Map();\n    this.outerNodes = [];\n    this.classes = /* @__PURE__ */new Map();\n    this.setAccTitle = setAccTitle;\n    this.getAccTitle = getAccTitle;\n    this.setDiagramTitle = setDiagramTitle;\n    this.getDiagramTitle = getDiagramTitle;\n    this.getAccDescription = getAccDescription;\n    this.setAccDescription = setAccDescription;\n  }\n  static {\n    __name(this, \"TreeMapDB\");\n  }\n  getNodes() {\n    return this.nodes;\n  }\n  getConfig() {\n    const defaultConfig = defaultConfig_default;\n    const userConfig = getConfig();\n    return cleanAndMerge({\n      ...defaultConfig.treemap,\n      ...(userConfig.treemap ?? {})\n    });\n  }\n  addNode(node, level) {\n    this.nodes.push(node);\n    this.levels.set(node, level);\n    if (level === 0) {\n      this.outerNodes.push(node);\n      this.root ??= node;\n    }\n  }\n  getRoot() {\n    return {\n      name: \"\",\n      children: this.outerNodes\n    };\n  }\n  addClass(id, _style) {\n    const styleClass = this.classes.get(id) ?? {\n      id,\n      styles: [],\n      textStyles: []\n    };\n    const styles = _style.replace(/\\\\,/g, \"\\xA7\\xA7\\xA7\").replace(/,/g, \";\").replace(/§§§/g, \",\").split(\";\");\n    if (styles) {\n      styles.forEach(s => {\n        if (isLabelStyle(s)) {\n          if (styleClass?.textStyles) {\n            styleClass.textStyles.push(s);\n          } else {\n            styleClass.textStyles = [s];\n          }\n        }\n        if (styleClass?.styles) {\n          styleClass.styles.push(s);\n        } else {\n          styleClass.styles = [s];\n        }\n      });\n    }\n    this.classes.set(id, styleClass);\n  }\n  getClasses() {\n    return this.classes;\n  }\n  getStylesForClass(classSelector) {\n    return this.classes.get(classSelector)?.styles ?? [];\n  }\n  clear() {\n    clear();\n    this.nodes = [];\n    this.levels = /* @__PURE__ */new Map();\n    this.outerNodes = [];\n    this.classes = /* @__PURE__ */new Map();\n    this.root = void 0;\n  }\n};\n\n// src/diagrams/treemap/parser.ts\nimport { parse } from \"@mermaid-js/parser\";\n\n// src/diagrams/treemap/utils.ts\nfunction buildHierarchy(items) {\n  if (!items.length) {\n    return [];\n  }\n  const root = [];\n  const stack = [];\n  items.forEach(item => {\n    const node = {\n      name: item.name,\n      children: item.type === \"Leaf\" ? void 0 : []\n    };\n    node.classSelector = item?.classSelector;\n    if (item?.cssCompiledStyles) {\n      node.cssCompiledStyles = [item.cssCompiledStyles];\n    }\n    if (item.type === \"Leaf\" && item.value !== void 0) {\n      node.value = item.value;\n    }\n    while (stack.length > 0 && stack[stack.length - 1].level >= item.level) {\n      stack.pop();\n    }\n    if (stack.length === 0) {\n      root.push(node);\n    } else {\n      const parent = stack[stack.length - 1].node;\n      if (parent.children) {\n        parent.children.push(node);\n      } else {\n        parent.children = [node];\n      }\n    }\n    if (item.type !== \"Leaf\") {\n      stack.push({\n        node,\n        level: item.level\n      });\n    }\n  });\n  return root;\n}\n__name(buildHierarchy, \"buildHierarchy\");\n\n// src/diagrams/treemap/parser.ts\nvar populate = /* @__PURE__ */__name((ast, db) => {\n  populateCommonDb(ast, db);\n  const items = [];\n  for (const row of ast.TreemapRows ?? []) {\n    if (row.$type === \"ClassDefStatement\") {\n      db.addClass(row.className ?? \"\", row.styleText ?? \"\");\n    }\n  }\n  for (const row of ast.TreemapRows ?? []) {\n    const item = row.item;\n    if (!item) {\n      continue;\n    }\n    const level = row.indent ? parseInt(row.indent) : 0;\n    const name = getItemName(item);\n    const styles = item.classSelector ? db.getStylesForClass(item.classSelector) : [];\n    const cssCompiledStyles = styles.length > 0 ? styles.join(\";\") : void 0;\n    const itemData = {\n      level,\n      name,\n      type: item.$type,\n      value: item.value,\n      classSelector: item.classSelector,\n      cssCompiledStyles\n    };\n    items.push(itemData);\n  }\n  const hierarchyNodes = buildHierarchy(items);\n  const addNodesRecursively = /* @__PURE__ */__name((nodes, level) => {\n    for (const node of nodes) {\n      db.addNode(node, level);\n      if (node.children && node.children.length > 0) {\n        addNodesRecursively(node.children, level + 1);\n      }\n    }\n  }, \"addNodesRecursively\");\n  addNodesRecursively(hierarchyNodes, 0);\n}, \"populate\");\nvar getItemName = /* @__PURE__ */__name(item => {\n  return item.name ? String(item.name) : \"\";\n}, \"getItemName\");\nvar parser = {\n  // @ts-expect-error - TreeMapDB is not assignable to DiagramDB\n  parser: {\n    yy: void 0\n  },\n  parse: /* @__PURE__ */__name(async text => {\n    try {\n      const parseFunc = parse;\n      const ast = await parseFunc(\"treemap\", text);\n      log.debug(\"Treemap AST:\", ast);\n      const db = parser.parser?.yy;\n      if (!(db instanceof TreeMapDB)) {\n        throw new Error(\"parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.\");\n      }\n      populate(ast, db);\n    } catch (error) {\n      log.error(\"Error parsing treemap:\", error);\n      throw error;\n    }\n  }, \"parse\")\n};\n\n// src/diagrams/treemap/renderer.ts\nimport { scaleOrdinal, treemap, hierarchy, format, select } from \"d3\";\nvar DEFAULT_INNER_PADDING = 10;\nvar SECTION_INNER_PADDING = 10;\nvar SECTION_HEADER_HEIGHT = 25;\nvar draw = /* @__PURE__ */__name((_text, id, _version, diagram2) => {\n  const treemapDb = diagram2.db;\n  const config = treemapDb.getConfig();\n  const treemapInnerPadding = config.padding ?? DEFAULT_INNER_PADDING;\n  const title = treemapDb.getDiagramTitle();\n  const root = treemapDb.getRoot();\n  const {\n    themeVariables\n  } = getConfig();\n  if (!root) {\n    return;\n  }\n  const titleHeight = title ? 30 : 0;\n  const svg = selectSvgElement(id);\n  const width = config.nodeWidth ? config.nodeWidth * SECTION_INNER_PADDING : 960;\n  const height = config.nodeHeight ? config.nodeHeight * SECTION_INNER_PADDING : 500;\n  const svgWidth = width;\n  const svgHeight = height + titleHeight;\n  svg.attr(\"viewBox\", `0 0 ${svgWidth} ${svgHeight}`);\n  configureSvgSize(svg, svgHeight, svgWidth, config.useMaxWidth);\n  let valueFormat;\n  try {\n    const formatStr = config.valueFormat || \",\";\n    if (formatStr === \"$0,0\") {\n      valueFormat = /* @__PURE__ */__name(value => \"$\" + format(\",\")(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\") && formatStr.includes(\",\")) {\n      const precision = /\\.\\d+/.exec(formatStr);\n      const precisionStr = precision ? precision[0] : \"\";\n      valueFormat = /* @__PURE__ */__name(value => \"$\" + format(\",\" + precisionStr)(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\")) {\n      const restOfFormat = formatStr.substring(1);\n      valueFormat = /* @__PURE__ */__name(value => \"$\" + format(restOfFormat || \"\")(value), \"valueFormat\");\n    } else {\n      valueFormat = format(formatStr);\n    }\n  } catch (error) {\n    log.error(\"Error creating format function:\", error);\n    valueFormat = format(\",\");\n  }\n  const colorScale = scaleOrdinal().range([\"transparent\", themeVariables.cScale0, themeVariables.cScale1, themeVariables.cScale2, themeVariables.cScale3, themeVariables.cScale4, themeVariables.cScale5, themeVariables.cScale6, themeVariables.cScale7, themeVariables.cScale8, themeVariables.cScale9, themeVariables.cScale10, themeVariables.cScale11]);\n  const colorScalePeer = scaleOrdinal().range([\"transparent\", themeVariables.cScalePeer0, themeVariables.cScalePeer1, themeVariables.cScalePeer2, themeVariables.cScalePeer3, themeVariables.cScalePeer4, themeVariables.cScalePeer5, themeVariables.cScalePeer6, themeVariables.cScalePeer7, themeVariables.cScalePeer8, themeVariables.cScalePeer9, themeVariables.cScalePeer10, themeVariables.cScalePeer11]);\n  const colorScaleLabel = scaleOrdinal().range([themeVariables.cScaleLabel0, themeVariables.cScaleLabel1, themeVariables.cScaleLabel2, themeVariables.cScaleLabel3, themeVariables.cScaleLabel4, themeVariables.cScaleLabel5, themeVariables.cScaleLabel6, themeVariables.cScaleLabel7, themeVariables.cScaleLabel8, themeVariables.cScaleLabel9, themeVariables.cScaleLabel10, themeVariables.cScaleLabel11]);\n  if (title) {\n    svg.append(\"text\").attr(\"x\", svgWidth / 2).attr(\"y\", titleHeight / 2).attr(\"class\", \"treemapTitle\").attr(\"text-anchor\", \"middle\").attr(\"dominant-baseline\", \"middle\").text(title);\n  }\n  const g = svg.append(\"g\").attr(\"transform\", `translate(0, ${titleHeight})`).attr(\"class\", \"treemapContainer\");\n  const hierarchyRoot = hierarchy(root).sum(d => d.value ?? 0).sort((a, b) => (b.value ?? 0) - (a.value ?? 0));\n  const treemapLayout = treemap().size([width, height]).paddingTop(d => d.children && d.children.length > 0 ? SECTION_HEADER_HEIGHT + SECTION_INNER_PADDING : 0).paddingInner(treemapInnerPadding).paddingLeft(d => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingRight(d => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingBottom(d => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).round(true);\n  const treemapData = treemapLayout(hierarchyRoot);\n  const branchNodes = treemapData.descendants().filter(d => d.children && d.children.length > 0);\n  const sections = g.selectAll(\".treemapSection\").data(branchNodes).enter().append(\"g\").attr(\"class\", \"treemapSection\").attr(\"transform\", d => `translate(${d.x0},${d.y0})`);\n  sections.append(\"rect\").attr(\"width\", d => d.x1 - d.x0).attr(\"height\", SECTION_HEADER_HEIGHT).attr(\"class\", \"treemapSectionHeader\").attr(\"fill\", \"none\").attr(\"fill-opacity\", 0.6).attr(\"stroke-width\", 0.6).attr(\"style\", d => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    return \"\";\n  });\n  sections.append(\"clipPath\").attr(\"id\", (_d, i) => `clip-section-${id}-${i}`).append(\"rect\").attr(\"width\", d => Math.max(0, d.x1 - d.x0 - 12)).attr(\"height\", SECTION_HEADER_HEIGHT);\n  sections.append(\"rect\").attr(\"width\", d => d.x1 - d.x0).attr(\"height\", d => d.y1 - d.y0).attr(\"class\", (_d, i) => {\n    return `treemapSection section${i}`;\n  }).attr(\"fill\", d => colorScale(d.data.name)).attr(\"fill-opacity\", 0.6).attr(\"stroke\", d => colorScalePeer(d.data.name)).attr(\"stroke-width\", 2).attr(\"stroke-opacity\", 0.4).attr(\"style\", d => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const styles = styles2String({\n      cssCompiledStyles: d.data.cssCompiledStyles\n    });\n    return styles.nodeStyles + \";\" + styles.borderStyles.join(\";\");\n  });\n  sections.append(\"text\").attr(\"class\", \"treemapSectionLabel\").attr(\"x\", 6).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"dominant-baseline\", \"middle\").text(d => d.depth === 0 ? \"\" : d.data.name).attr(\"font-weight\", \"bold\").attr(\"style\", d => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const labelStyles = \"dominant-baseline: middle; font-size: 12px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n    const styles = styles2String({\n      cssCompiledStyles: d.data.cssCompiledStyles\n    });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).each(function (d) {\n    if (d.depth === 0) {\n      return;\n    }\n    const self = select(this);\n    const originalText = d.data.name;\n    self.text(originalText);\n    const totalHeaderWidth = d.x1 - d.x0;\n    const labelXPosition = 6;\n    let spaceForTextContent;\n    if (config.showValues !== false && d.value) {\n      const valueEndsAtXRelative = totalHeaderWidth - 10;\n      const estimatedValueTextActualWidth = 30;\n      const gapBetweenLabelAndValue = 10;\n      const labelMustEndBeforeX = valueEndsAtXRelative - estimatedValueTextActualWidth - gapBetweenLabelAndValue;\n      spaceForTextContent = labelMustEndBeforeX - labelXPosition;\n    } else {\n      const labelOwnRightPadding = 6;\n      spaceForTextContent = totalHeaderWidth - labelXPosition - labelOwnRightPadding;\n    }\n    const minimumWidthToDisplay = 15;\n    const actualAvailableWidth = Math.max(minimumWidthToDisplay, spaceForTextContent);\n    const textNode = self.node();\n    const currentTextContentLength = textNode.getComputedTextLength();\n    if (currentTextContentLength > actualAvailableWidth) {\n      const ellipsis = \"...\";\n      let currentTruncatedText = originalText;\n      while (currentTruncatedText.length > 0) {\n        currentTruncatedText = originalText.substring(0, currentTruncatedText.length - 1);\n        if (currentTruncatedText.length === 0) {\n          self.text(ellipsis);\n          if (textNode.getComputedTextLength() > actualAvailableWidth) {\n            self.text(\"\");\n          }\n          break;\n        }\n        self.text(currentTruncatedText + ellipsis);\n        if (textNode.getComputedTextLength() <= actualAvailableWidth) {\n          break;\n        }\n      }\n    }\n  });\n  if (config.showValues !== false) {\n    sections.append(\"text\").attr(\"class\", \"treemapSectionValue\").attr(\"x\", d => d.x1 - d.x0 - 10).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"text-anchor\", \"end\").attr(\"dominant-baseline\", \"middle\").text(d => d.value ? valueFormat(d.value) : \"\").attr(\"font-style\", \"italic\").attr(\"style\", d => {\n      if (d.depth === 0) {\n        return \"display: none;\";\n      }\n      const labelStyles = \"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n      const styles = styles2String({\n        cssCompiledStyles: d.data.cssCompiledStyles\n      });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    });\n  }\n  const leafNodes = treemapData.leaves();\n  const cell = g.selectAll(\".treemapLeafGroup\").data(leafNodes).enter().append(\"g\").attr(\"class\", (d, i) => {\n    return `treemapNode treemapLeafGroup leaf${i}${d.data.classSelector ? ` ${d.data.classSelector}` : \"\"}x`;\n  }).attr(\"transform\", d => `translate(${d.x0},${d.y0})`);\n  cell.append(\"rect\").attr(\"width\", d => d.x1 - d.x0).attr(\"height\", d => d.y1 - d.y0).attr(\"class\", \"treemapLeaf\").attr(\"fill\", d => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"style\", d => {\n    const styles = styles2String({\n      cssCompiledStyles: d.data.cssCompiledStyles\n    });\n    return styles.nodeStyles;\n  }).attr(\"fill-opacity\", 0.3).attr(\"stroke\", d => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"stroke-width\", 3);\n  cell.append(\"clipPath\").attr(\"id\", (_d, i) => `clip-${id}-${i}`).append(\"rect\").attr(\"width\", d => Math.max(0, d.x1 - d.x0 - 4)).attr(\"height\", d => Math.max(0, d.y1 - d.y0 - 4));\n  const leafLabels = cell.append(\"text\").attr(\"class\", \"treemapLabel\").attr(\"x\", d => (d.x1 - d.x0) / 2).attr(\"y\", d => (d.y1 - d.y0) / 2).attr(\"style\", d => {\n    const labelStyles = \"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n    const styles = styles2String({\n      cssCompiledStyles: d.data.cssCompiledStyles\n    });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).attr(\"clip-path\", (_d, i) => `url(#clip-${id}-${i})`).text(d => d.data.name);\n  leafLabels.each(function (d) {\n    const self = select(this);\n    const nodeWidth = d.x1 - d.x0;\n    const nodeHeight = d.y1 - d.y0;\n    const textNode = self.node();\n    const padding = 4;\n    const availableWidth = nodeWidth - 2 * padding;\n    const availableHeight = nodeHeight - 2 * padding;\n    if (availableWidth < 10 || availableHeight < 10) {\n      self.style(\"display\", \"none\");\n      return;\n    }\n    let currentLabelFontSize = parseInt(self.style(\"font-size\"), 10);\n    const minLabelFontSize = 8;\n    const originalValueRelFontSize = 28;\n    const valueScaleFactor = 0.6;\n    const minValueFontSize = 6;\n    const spacingBetweenLabelAndValue = 2;\n    while (textNode.getComputedTextLength() > availableWidth && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      self.style(\"font-size\", `${currentLabelFontSize}px`);\n    }\n    let prospectiveValueFontSize = Math.max(minValueFontSize, Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor)));\n    let combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n    while (combinedHeight > availableHeight && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      prospectiveValueFontSize = Math.max(minValueFontSize, Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor)));\n      if (prospectiveValueFontSize < minValueFontSize && currentLabelFontSize === minLabelFontSize) {\n        break;\n      }\n      self.style(\"font-size\", `${currentLabelFontSize}px`);\n      combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n      if (prospectiveValueFontSize <= minValueFontSize && combinedHeight > availableHeight) {}\n    }\n    self.style(\"font-size\", `${currentLabelFontSize}px`);\n    if (textNode.getComputedTextLength() > availableWidth || currentLabelFontSize < minLabelFontSize || availableHeight < currentLabelFontSize) {\n      self.style(\"display\", \"none\");\n    }\n  });\n  if (config.showValues !== false) {\n    const leafValues = cell.append(\"text\").attr(\"class\", \"treemapValue\").attr(\"x\", d => (d.x1 - d.x0) / 2).attr(\"y\", function (d) {\n      return (d.y1 - d.y0) / 2;\n    }).attr(\"style\", d => {\n      const labelStyles = \"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n      const styles = styles2String({\n        cssCompiledStyles: d.data.cssCompiledStyles\n      });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    }).attr(\"clip-path\", (_d, i) => `url(#clip-${id}-${i})`).text(d => d.value ? valueFormat(d.value) : \"\");\n    leafValues.each(function (d) {\n      const valueTextElement = select(this);\n      const parentCellNode = this.parentNode;\n      if (!parentCellNode) {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const labelElement = select(parentCellNode).select(\".treemapLabel\");\n      if (labelElement.empty() || labelElement.style(\"display\") === \"none\") {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const finalLabelFontSize = parseFloat(labelElement.style(\"font-size\"));\n      const originalValueFontSize = 28;\n      const valueScaleFactor = 0.6;\n      const minValueFontSize = 6;\n      const spacingBetweenLabelAndValue = 2;\n      const actualValueFontSize = Math.max(minValueFontSize, Math.min(originalValueFontSize, Math.round(finalLabelFontSize * valueScaleFactor)));\n      valueTextElement.style(\"font-size\", `${actualValueFontSize}px`);\n      const labelCenterY = (d.y1 - d.y0) / 2;\n      const valueTopActualY = labelCenterY + finalLabelFontSize / 2 + spacingBetweenLabelAndValue;\n      valueTextElement.attr(\"y\", valueTopActualY);\n      const nodeWidth = d.x1 - d.x0;\n      const nodeTotalHeight = d.y1 - d.y0;\n      const cellBottomPadding = 4;\n      const maxValueBottomY = nodeTotalHeight - cellBottomPadding;\n      const availableWidthForValue = nodeWidth - 2 * 4;\n      if (valueTextElement.node().getComputedTextLength() > availableWidthForValue || valueTopActualY + actualValueFontSize > maxValueBottomY || actualValueFontSize < minValueFontSize) {\n        valueTextElement.style(\"display\", \"none\");\n      } else {\n        valueTextElement.style(\"display\", null);\n      }\n    });\n  }\n  const diagramPadding = config.diagramPadding ?? 8;\n  setupViewPortForSVG(svg, diagramPadding, \"flowchart\", config?.useMaxWidth || false);\n}, \"draw\");\nvar getClasses = /* @__PURE__ */__name(function (_text, diagramObj) {\n  return diagramObj.db.getClasses();\n}, \"getClasses\");\nvar renderer = {\n  draw,\n  getClasses\n};\n\n// src/diagrams/treemap/styles.ts\nvar defaultTreemapStyleOptions = {\n  sectionStrokeColor: \"black\",\n  sectionStrokeWidth: \"1\",\n  sectionFillColor: \"#efefef\",\n  leafStrokeColor: \"black\",\n  leafStrokeWidth: \"1\",\n  leafFillColor: \"#efefef\",\n  labelColor: \"black\",\n  labelFontSize: \"12px\",\n  valueFontSize: \"10px\",\n  valueColor: \"black\",\n  titleColor: \"black\",\n  titleFontSize: \"14px\"\n};\nvar getStyles = /* @__PURE__ */__name(({\n  treemap: treemap2\n} = {}) => {\n  const options = cleanAndMerge(defaultTreemapStyleOptions, treemap2);\n  return `\n  .treemapNode.section {\n    stroke: ${options.sectionStrokeColor};\n    stroke-width: ${options.sectionStrokeWidth};\n    fill: ${options.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${options.leafStrokeColor};\n    stroke-width: ${options.leafStrokeWidth};\n    fill: ${options.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${options.labelColor};\n    font-size: ${options.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${options.valueColor};\n    font-size: ${options.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${options.titleColor};\n    font-size: ${options.titleFontSize};\n  }\n  `;\n}, \"getStyles\");\nvar styles_default = getStyles;\n\n// src/diagrams/treemap/diagram.ts\nvar diagram = {\n  parser,\n  get db() {\n    return new TreeMapDB();\n  },\n  renderer,\n  styles: styles_default\n};\nexport { diagram };","map":{"version":3,"names":["setupViewPortForSVG","isLabelStyle","styles2String","populateCommonDb","cleanAndMerge","selectSvgElement","__name","clear","configureSvgSize","defaultConfig_default","getAccDescription","getAccTitle","getConfig","getDiagramTitle","log","setAccDescription","setAccTitle","setDiagramTitle","TreeMapDB","constructor","nodes","levels","Map","outerNodes","classes","getNodes","defaultConfig","userConfig","treemap","addNode","node","level","push","set","root","getRoot","name","children","addClass","id","_style","styleClass","get","styles","textStyles","replace","split","forEach","s","getClasses","getStylesForClass","classSelector","parse","buildHierarchy","items","length","stack","item","type","cssCompiledStyles","value","pop","parent","populate","ast","db","row","TreemapRows","$type","className","styleText","indent","parseInt","getItemName","join","itemData","hierarchyNodes","addNodesRecursively","String","parser","yy","text","parseFunc","debug","Error","error","scaleOrdinal","hierarchy","format","select","DEFAULT_INNER_PADDING","SECTION_INNER_PADDING","SECTION_HEADER_HEIGHT","draw","_text","_version","diagram2","treemapDb","config","treemapInnerPadding","padding","title","themeVariables","titleHeight","svg","width","nodeWidth","height","nodeHeight","svgWidth","svgHeight","attr","useMaxWidth","valueFormat","formatStr","startsWith","includes","precision","exec","precisionStr","restOfFormat","substring","colorScale","range","cScale0","cScale1","cScale2","cScale3","cScale4","cScale5","cScale6","cScale7","cScale8","cScale9","cScale10","cScale11","colorScalePeer","cScalePeer0","cScalePeer1","cScalePeer2","cScalePeer3","cScalePeer4","cScalePeer5","cScalePeer6","cScalePeer7","cScalePeer8","cScalePeer9","cScalePeer10","cScalePeer11","colorScaleLabel","cScaleLabel0","cScaleLabel1","cScaleLabel2","cScaleLabel3","cScaleLabel4","cScaleLabel5","cScaleLabel6","cScaleLabel7","cScaleLabel8","cScaleLabel9","cScaleLabel10","cScaleLabel11","append","g","hierarchyRoot","sum","d","sort","a","b","treemapLayout","size","paddingTop","paddingInner","paddingLeft","paddingRight","paddingBottom","round","treemapData","branchNodes","descendants","filter","sections","selectAll","data","enter","x0","y0","x1","depth","_d","i","Math","max","y1","nodeStyles","borderStyles","labelStyles","each","self","originalText","totalHeaderWidth","labelXPosition","spaceForTextContent","showValues","valueEndsAtXRelative","estimatedValueTextActualWidth","gapBetweenLabelAndValue","labelMustEndBeforeX","labelOwnRightPadding","minimumWidthToDisplay","actualAvailableWidth","textNode","currentTextContentLength","getComputedTextLength","ellipsis","currentTruncatedText","leafNodes","leaves","cell","leafLabels","availableWidth","availableHeight","style","currentLabelFontSize","minLabelFontSize","originalValueRelFontSize","valueScaleFactor","minValueFontSize","spacingBetweenLabelAndValue","prospectiveValueFontSize","min","combinedHeight","leafValues","valueTextElement","parentCellNode","parentNode","labelElement","empty","finalLabelFontSize","parseFloat","originalValueFontSize","actualValueFontSize","labelCenterY","valueTopActualY","nodeTotalHeight","cellBottomPadding","maxValueBottomY","availableWidthForValue","diagramPadding","diagramObj","renderer","defaultTreemapStyleOptions","sectionStrokeColor","sectionStrokeWidth","sectionFillColor","leafStrokeColor","leafStrokeWidth","leafFillColor","labelColor","labelFontSize","valueFontSize","valueColor","titleColor","titleFontSize","getStyles","treemap2","options","styles_default","diagram"],"sources":["D:/DBMS/DBMS Project/frontend/node_modules/mermaid/dist/chunks/mermaid.core/diagram-VMROVX33.mjs"],"sourcesContent":["import {\n  setupViewPortForSVG\n} from \"./chunk-SKB7J2MH.mjs\";\nimport {\n  isLabelStyle,\n  styles2String\n} from \"./chunk-UWXLY5YG.mjs\";\nimport {\n  populateCommonDb\n} from \"./chunk-353BL4L5.mjs\";\nimport {\n  cleanAndMerge\n} from \"./chunk-55PJQP7W.mjs\";\nimport {\n  selectSvgElement\n} from \"./chunk-P3VETL53.mjs\";\nimport {\n  __name,\n  clear,\n  configureSvgSize,\n  defaultConfig_default,\n  getAccDescription,\n  getAccTitle,\n  getConfig,\n  getDiagramTitle,\n  log,\n  setAccDescription,\n  setAccTitle,\n  setDiagramTitle\n} from \"./chunk-3XYRH5AP.mjs\";\n\n// src/diagrams/treemap/db.ts\nvar TreeMapDB = class {\n  constructor() {\n    this.nodes = [];\n    this.levels = /* @__PURE__ */ new Map();\n    this.outerNodes = [];\n    this.classes = /* @__PURE__ */ new Map();\n    this.setAccTitle = setAccTitle;\n    this.getAccTitle = getAccTitle;\n    this.setDiagramTitle = setDiagramTitle;\n    this.getDiagramTitle = getDiagramTitle;\n    this.getAccDescription = getAccDescription;\n    this.setAccDescription = setAccDescription;\n  }\n  static {\n    __name(this, \"TreeMapDB\");\n  }\n  getNodes() {\n    return this.nodes;\n  }\n  getConfig() {\n    const defaultConfig = defaultConfig_default;\n    const userConfig = getConfig();\n    return cleanAndMerge({\n      ...defaultConfig.treemap,\n      ...userConfig.treemap ?? {}\n    });\n  }\n  addNode(node, level) {\n    this.nodes.push(node);\n    this.levels.set(node, level);\n    if (level === 0) {\n      this.outerNodes.push(node);\n      this.root ??= node;\n    }\n  }\n  getRoot() {\n    return { name: \"\", children: this.outerNodes };\n  }\n  addClass(id, _style) {\n    const styleClass = this.classes.get(id) ?? { id, styles: [], textStyles: [] };\n    const styles = _style.replace(/\\\\,/g, \"\\xA7\\xA7\\xA7\").replace(/,/g, \";\").replace(/§§§/g, \",\").split(\";\");\n    if (styles) {\n      styles.forEach((s) => {\n        if (isLabelStyle(s)) {\n          if (styleClass?.textStyles) {\n            styleClass.textStyles.push(s);\n          } else {\n            styleClass.textStyles = [s];\n          }\n        }\n        if (styleClass?.styles) {\n          styleClass.styles.push(s);\n        } else {\n          styleClass.styles = [s];\n        }\n      });\n    }\n    this.classes.set(id, styleClass);\n  }\n  getClasses() {\n    return this.classes;\n  }\n  getStylesForClass(classSelector) {\n    return this.classes.get(classSelector)?.styles ?? [];\n  }\n  clear() {\n    clear();\n    this.nodes = [];\n    this.levels = /* @__PURE__ */ new Map();\n    this.outerNodes = [];\n    this.classes = /* @__PURE__ */ new Map();\n    this.root = void 0;\n  }\n};\n\n// src/diagrams/treemap/parser.ts\nimport { parse } from \"@mermaid-js/parser\";\n\n// src/diagrams/treemap/utils.ts\nfunction buildHierarchy(items) {\n  if (!items.length) {\n    return [];\n  }\n  const root = [];\n  const stack = [];\n  items.forEach((item) => {\n    const node = {\n      name: item.name,\n      children: item.type === \"Leaf\" ? void 0 : []\n    };\n    node.classSelector = item?.classSelector;\n    if (item?.cssCompiledStyles) {\n      node.cssCompiledStyles = [item.cssCompiledStyles];\n    }\n    if (item.type === \"Leaf\" && item.value !== void 0) {\n      node.value = item.value;\n    }\n    while (stack.length > 0 && stack[stack.length - 1].level >= item.level) {\n      stack.pop();\n    }\n    if (stack.length === 0) {\n      root.push(node);\n    } else {\n      const parent = stack[stack.length - 1].node;\n      if (parent.children) {\n        parent.children.push(node);\n      } else {\n        parent.children = [node];\n      }\n    }\n    if (item.type !== \"Leaf\") {\n      stack.push({ node, level: item.level });\n    }\n  });\n  return root;\n}\n__name(buildHierarchy, \"buildHierarchy\");\n\n// src/diagrams/treemap/parser.ts\nvar populate = /* @__PURE__ */ __name((ast, db) => {\n  populateCommonDb(ast, db);\n  const items = [];\n  for (const row of ast.TreemapRows ?? []) {\n    if (row.$type === \"ClassDefStatement\") {\n      db.addClass(row.className ?? \"\", row.styleText ?? \"\");\n    }\n  }\n  for (const row of ast.TreemapRows ?? []) {\n    const item = row.item;\n    if (!item) {\n      continue;\n    }\n    const level = row.indent ? parseInt(row.indent) : 0;\n    const name = getItemName(item);\n    const styles = item.classSelector ? db.getStylesForClass(item.classSelector) : [];\n    const cssCompiledStyles = styles.length > 0 ? styles.join(\";\") : void 0;\n    const itemData = {\n      level,\n      name,\n      type: item.$type,\n      value: item.value,\n      classSelector: item.classSelector,\n      cssCompiledStyles\n    };\n    items.push(itemData);\n  }\n  const hierarchyNodes = buildHierarchy(items);\n  const addNodesRecursively = /* @__PURE__ */ __name((nodes, level) => {\n    for (const node of nodes) {\n      db.addNode(node, level);\n      if (node.children && node.children.length > 0) {\n        addNodesRecursively(node.children, level + 1);\n      }\n    }\n  }, \"addNodesRecursively\");\n  addNodesRecursively(hierarchyNodes, 0);\n}, \"populate\");\nvar getItemName = /* @__PURE__ */ __name((item) => {\n  return item.name ? String(item.name) : \"\";\n}, \"getItemName\");\nvar parser = {\n  // @ts-expect-error - TreeMapDB is not assignable to DiagramDB\n  parser: { yy: void 0 },\n  parse: /* @__PURE__ */ __name(async (text) => {\n    try {\n      const parseFunc = parse;\n      const ast = await parseFunc(\"treemap\", text);\n      log.debug(\"Treemap AST:\", ast);\n      const db = parser.parser?.yy;\n      if (!(db instanceof TreeMapDB)) {\n        throw new Error(\n          \"parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.\"\n        );\n      }\n      populate(ast, db);\n    } catch (error) {\n      log.error(\"Error parsing treemap:\", error);\n      throw error;\n    }\n  }, \"parse\")\n};\n\n// src/diagrams/treemap/renderer.ts\nimport { scaleOrdinal, treemap, hierarchy, format, select } from \"d3\";\nvar DEFAULT_INNER_PADDING = 10;\nvar SECTION_INNER_PADDING = 10;\nvar SECTION_HEADER_HEIGHT = 25;\nvar draw = /* @__PURE__ */ __name((_text, id, _version, diagram2) => {\n  const treemapDb = diagram2.db;\n  const config = treemapDb.getConfig();\n  const treemapInnerPadding = config.padding ?? DEFAULT_INNER_PADDING;\n  const title = treemapDb.getDiagramTitle();\n  const root = treemapDb.getRoot();\n  const { themeVariables } = getConfig();\n  if (!root) {\n    return;\n  }\n  const titleHeight = title ? 30 : 0;\n  const svg = selectSvgElement(id);\n  const width = config.nodeWidth ? config.nodeWidth * SECTION_INNER_PADDING : 960;\n  const height = config.nodeHeight ? config.nodeHeight * SECTION_INNER_PADDING : 500;\n  const svgWidth = width;\n  const svgHeight = height + titleHeight;\n  svg.attr(\"viewBox\", `0 0 ${svgWidth} ${svgHeight}`);\n  configureSvgSize(svg, svgHeight, svgWidth, config.useMaxWidth);\n  let valueFormat;\n  try {\n    const formatStr = config.valueFormat || \",\";\n    if (formatStr === \"$0,0\") {\n      valueFormat = /* @__PURE__ */ __name((value) => \"$\" + format(\",\")(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\") && formatStr.includes(\",\")) {\n      const precision = /\\.\\d+/.exec(formatStr);\n      const precisionStr = precision ? precision[0] : \"\";\n      valueFormat = /* @__PURE__ */ __name((value) => \"$\" + format(\",\" + precisionStr)(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\")) {\n      const restOfFormat = formatStr.substring(1);\n      valueFormat = /* @__PURE__ */ __name((value) => \"$\" + format(restOfFormat || \"\")(value), \"valueFormat\");\n    } else {\n      valueFormat = format(formatStr);\n    }\n  } catch (error) {\n    log.error(\"Error creating format function:\", error);\n    valueFormat = format(\",\");\n  }\n  const colorScale = scaleOrdinal().range([\n    \"transparent\",\n    themeVariables.cScale0,\n    themeVariables.cScale1,\n    themeVariables.cScale2,\n    themeVariables.cScale3,\n    themeVariables.cScale4,\n    themeVariables.cScale5,\n    themeVariables.cScale6,\n    themeVariables.cScale7,\n    themeVariables.cScale8,\n    themeVariables.cScale9,\n    themeVariables.cScale10,\n    themeVariables.cScale11\n  ]);\n  const colorScalePeer = scaleOrdinal().range([\n    \"transparent\",\n    themeVariables.cScalePeer0,\n    themeVariables.cScalePeer1,\n    themeVariables.cScalePeer2,\n    themeVariables.cScalePeer3,\n    themeVariables.cScalePeer4,\n    themeVariables.cScalePeer5,\n    themeVariables.cScalePeer6,\n    themeVariables.cScalePeer7,\n    themeVariables.cScalePeer8,\n    themeVariables.cScalePeer9,\n    themeVariables.cScalePeer10,\n    themeVariables.cScalePeer11\n  ]);\n  const colorScaleLabel = scaleOrdinal().range([\n    themeVariables.cScaleLabel0,\n    themeVariables.cScaleLabel1,\n    themeVariables.cScaleLabel2,\n    themeVariables.cScaleLabel3,\n    themeVariables.cScaleLabel4,\n    themeVariables.cScaleLabel5,\n    themeVariables.cScaleLabel6,\n    themeVariables.cScaleLabel7,\n    themeVariables.cScaleLabel8,\n    themeVariables.cScaleLabel9,\n    themeVariables.cScaleLabel10,\n    themeVariables.cScaleLabel11\n  ]);\n  if (title) {\n    svg.append(\"text\").attr(\"x\", svgWidth / 2).attr(\"y\", titleHeight / 2).attr(\"class\", \"treemapTitle\").attr(\"text-anchor\", \"middle\").attr(\"dominant-baseline\", \"middle\").text(title);\n  }\n  const g = svg.append(\"g\").attr(\"transform\", `translate(0, ${titleHeight})`).attr(\"class\", \"treemapContainer\");\n  const hierarchyRoot = hierarchy(root).sum((d) => d.value ?? 0).sort((a, b) => (b.value ?? 0) - (a.value ?? 0));\n  const treemapLayout = treemap().size([width, height]).paddingTop(\n    (d) => d.children && d.children.length > 0 ? SECTION_HEADER_HEIGHT + SECTION_INNER_PADDING : 0\n  ).paddingInner(treemapInnerPadding).paddingLeft((d) => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingRight((d) => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingBottom((d) => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).round(true);\n  const treemapData = treemapLayout(hierarchyRoot);\n  const branchNodes = treemapData.descendants().filter((d) => d.children && d.children.length > 0);\n  const sections = g.selectAll(\".treemapSection\").data(branchNodes).enter().append(\"g\").attr(\"class\", \"treemapSection\").attr(\"transform\", (d) => `translate(${d.x0},${d.y0})`);\n  sections.append(\"rect\").attr(\"width\", (d) => d.x1 - d.x0).attr(\"height\", SECTION_HEADER_HEIGHT).attr(\"class\", \"treemapSectionHeader\").attr(\"fill\", \"none\").attr(\"fill-opacity\", 0.6).attr(\"stroke-width\", 0.6).attr(\"style\", (d) => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    return \"\";\n  });\n  sections.append(\"clipPath\").attr(\"id\", (_d, i) => `clip-section-${id}-${i}`).append(\"rect\").attr(\"width\", (d) => Math.max(0, d.x1 - d.x0 - 12)).attr(\"height\", SECTION_HEADER_HEIGHT);\n  sections.append(\"rect\").attr(\"width\", (d) => d.x1 - d.x0).attr(\"height\", (d) => d.y1 - d.y0).attr(\"class\", (_d, i) => {\n    return `treemapSection section${i}`;\n  }).attr(\"fill\", (d) => colorScale(d.data.name)).attr(\"fill-opacity\", 0.6).attr(\"stroke\", (d) => colorScalePeer(d.data.name)).attr(\"stroke-width\", 2).attr(\"stroke-opacity\", 0.4).attr(\"style\", (d) => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return styles.nodeStyles + \";\" + styles.borderStyles.join(\";\");\n  });\n  sections.append(\"text\").attr(\"class\", \"treemapSectionLabel\").attr(\"x\", 6).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"dominant-baseline\", \"middle\").text((d) => d.depth === 0 ? \"\" : d.data.name).attr(\"font-weight\", \"bold\").attr(\"style\", (d) => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const labelStyles = \"dominant-baseline: middle; font-size: 12px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).each(function(d) {\n    if (d.depth === 0) {\n      return;\n    }\n    const self = select(this);\n    const originalText = d.data.name;\n    self.text(originalText);\n    const totalHeaderWidth = d.x1 - d.x0;\n    const labelXPosition = 6;\n    let spaceForTextContent;\n    if (config.showValues !== false && d.value) {\n      const valueEndsAtXRelative = totalHeaderWidth - 10;\n      const estimatedValueTextActualWidth = 30;\n      const gapBetweenLabelAndValue = 10;\n      const labelMustEndBeforeX = valueEndsAtXRelative - estimatedValueTextActualWidth - gapBetweenLabelAndValue;\n      spaceForTextContent = labelMustEndBeforeX - labelXPosition;\n    } else {\n      const labelOwnRightPadding = 6;\n      spaceForTextContent = totalHeaderWidth - labelXPosition - labelOwnRightPadding;\n    }\n    const minimumWidthToDisplay = 15;\n    const actualAvailableWidth = Math.max(minimumWidthToDisplay, spaceForTextContent);\n    const textNode = self.node();\n    const currentTextContentLength = textNode.getComputedTextLength();\n    if (currentTextContentLength > actualAvailableWidth) {\n      const ellipsis = \"...\";\n      let currentTruncatedText = originalText;\n      while (currentTruncatedText.length > 0) {\n        currentTruncatedText = originalText.substring(0, currentTruncatedText.length - 1);\n        if (currentTruncatedText.length === 0) {\n          self.text(ellipsis);\n          if (textNode.getComputedTextLength() > actualAvailableWidth) {\n            self.text(\"\");\n          }\n          break;\n        }\n        self.text(currentTruncatedText + ellipsis);\n        if (textNode.getComputedTextLength() <= actualAvailableWidth) {\n          break;\n        }\n      }\n    }\n  });\n  if (config.showValues !== false) {\n    sections.append(\"text\").attr(\"class\", \"treemapSectionValue\").attr(\"x\", (d) => d.x1 - d.x0 - 10).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"text-anchor\", \"end\").attr(\"dominant-baseline\", \"middle\").text((d) => d.value ? valueFormat(d.value) : \"\").attr(\"font-style\", \"italic\").attr(\"style\", (d) => {\n      if (d.depth === 0) {\n        return \"display: none;\";\n      }\n      const labelStyles = \"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n      const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    });\n  }\n  const leafNodes = treemapData.leaves();\n  const cell = g.selectAll(\".treemapLeafGroup\").data(leafNodes).enter().append(\"g\").attr(\"class\", (d, i) => {\n    return `treemapNode treemapLeafGroup leaf${i}${d.data.classSelector ? ` ${d.data.classSelector}` : \"\"}x`;\n  }).attr(\"transform\", (d) => `translate(${d.x0},${d.y0})`);\n  cell.append(\"rect\").attr(\"width\", (d) => d.x1 - d.x0).attr(\"height\", (d) => d.y1 - d.y0).attr(\"class\", \"treemapLeaf\").attr(\"fill\", (d) => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"style\", (d) => {\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return styles.nodeStyles;\n  }).attr(\"fill-opacity\", 0.3).attr(\"stroke\", (d) => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"stroke-width\", 3);\n  cell.append(\"clipPath\").attr(\"id\", (_d, i) => `clip-${id}-${i}`).append(\"rect\").attr(\"width\", (d) => Math.max(0, d.x1 - d.x0 - 4)).attr(\"height\", (d) => Math.max(0, d.y1 - d.y0 - 4));\n  const leafLabels = cell.append(\"text\").attr(\"class\", \"treemapLabel\").attr(\"x\", (d) => (d.x1 - d.x0) / 2).attr(\"y\", (d) => (d.y1 - d.y0) / 2).attr(\"style\", (d) => {\n    const labelStyles = \"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).attr(\"clip-path\", (_d, i) => `url(#clip-${id}-${i})`).text((d) => d.data.name);\n  leafLabels.each(function(d) {\n    const self = select(this);\n    const nodeWidth = d.x1 - d.x0;\n    const nodeHeight = d.y1 - d.y0;\n    const textNode = self.node();\n    const padding = 4;\n    const availableWidth = nodeWidth - 2 * padding;\n    const availableHeight = nodeHeight - 2 * padding;\n    if (availableWidth < 10 || availableHeight < 10) {\n      self.style(\"display\", \"none\");\n      return;\n    }\n    let currentLabelFontSize = parseInt(self.style(\"font-size\"), 10);\n    const minLabelFontSize = 8;\n    const originalValueRelFontSize = 28;\n    const valueScaleFactor = 0.6;\n    const minValueFontSize = 6;\n    const spacingBetweenLabelAndValue = 2;\n    while (textNode.getComputedTextLength() > availableWidth && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      self.style(\"font-size\", `${currentLabelFontSize}px`);\n    }\n    let prospectiveValueFontSize = Math.max(\n      minValueFontSize,\n      Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor))\n    );\n    let combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n    while (combinedHeight > availableHeight && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      prospectiveValueFontSize = Math.max(\n        minValueFontSize,\n        Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor))\n      );\n      if (prospectiveValueFontSize < minValueFontSize && currentLabelFontSize === minLabelFontSize) {\n        break;\n      }\n      self.style(\"font-size\", `${currentLabelFontSize}px`);\n      combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n      if (prospectiveValueFontSize <= minValueFontSize && combinedHeight > availableHeight) {\n      }\n    }\n    self.style(\"font-size\", `${currentLabelFontSize}px`);\n    if (textNode.getComputedTextLength() > availableWidth || currentLabelFontSize < minLabelFontSize || availableHeight < currentLabelFontSize) {\n      self.style(\"display\", \"none\");\n    }\n  });\n  if (config.showValues !== false) {\n    const leafValues = cell.append(\"text\").attr(\"class\", \"treemapValue\").attr(\"x\", (d) => (d.x1 - d.x0) / 2).attr(\"y\", function(d) {\n      return (d.y1 - d.y0) / 2;\n    }).attr(\"style\", (d) => {\n      const labelStyles = \"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n      const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    }).attr(\"clip-path\", (_d, i) => `url(#clip-${id}-${i})`).text((d) => d.value ? valueFormat(d.value) : \"\");\n    leafValues.each(function(d) {\n      const valueTextElement = select(this);\n      const parentCellNode = this.parentNode;\n      if (!parentCellNode) {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const labelElement = select(parentCellNode).select(\".treemapLabel\");\n      if (labelElement.empty() || labelElement.style(\"display\") === \"none\") {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const finalLabelFontSize = parseFloat(labelElement.style(\"font-size\"));\n      const originalValueFontSize = 28;\n      const valueScaleFactor = 0.6;\n      const minValueFontSize = 6;\n      const spacingBetweenLabelAndValue = 2;\n      const actualValueFontSize = Math.max(\n        minValueFontSize,\n        Math.min(originalValueFontSize, Math.round(finalLabelFontSize * valueScaleFactor))\n      );\n      valueTextElement.style(\"font-size\", `${actualValueFontSize}px`);\n      const labelCenterY = (d.y1 - d.y0) / 2;\n      const valueTopActualY = labelCenterY + finalLabelFontSize / 2 + spacingBetweenLabelAndValue;\n      valueTextElement.attr(\"y\", valueTopActualY);\n      const nodeWidth = d.x1 - d.x0;\n      const nodeTotalHeight = d.y1 - d.y0;\n      const cellBottomPadding = 4;\n      const maxValueBottomY = nodeTotalHeight - cellBottomPadding;\n      const availableWidthForValue = nodeWidth - 2 * 4;\n      if (valueTextElement.node().getComputedTextLength() > availableWidthForValue || valueTopActualY + actualValueFontSize > maxValueBottomY || actualValueFontSize < minValueFontSize) {\n        valueTextElement.style(\"display\", \"none\");\n      } else {\n        valueTextElement.style(\"display\", null);\n      }\n    });\n  }\n  const diagramPadding = config.diagramPadding ?? 8;\n  setupViewPortForSVG(svg, diagramPadding, \"flowchart\", config?.useMaxWidth || false);\n}, \"draw\");\nvar getClasses = /* @__PURE__ */ __name(function(_text, diagramObj) {\n  return diagramObj.db.getClasses();\n}, \"getClasses\");\nvar renderer = { draw, getClasses };\n\n// src/diagrams/treemap/styles.ts\nvar defaultTreemapStyleOptions = {\n  sectionStrokeColor: \"black\",\n  sectionStrokeWidth: \"1\",\n  sectionFillColor: \"#efefef\",\n  leafStrokeColor: \"black\",\n  leafStrokeWidth: \"1\",\n  leafFillColor: \"#efefef\",\n  labelColor: \"black\",\n  labelFontSize: \"12px\",\n  valueFontSize: \"10px\",\n  valueColor: \"black\",\n  titleColor: \"black\",\n  titleFontSize: \"14px\"\n};\nvar getStyles = /* @__PURE__ */ __name(({\n  treemap: treemap2\n} = {}) => {\n  const options = cleanAndMerge(defaultTreemapStyleOptions, treemap2);\n  return `\n  .treemapNode.section {\n    stroke: ${options.sectionStrokeColor};\n    stroke-width: ${options.sectionStrokeWidth};\n    fill: ${options.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${options.leafStrokeColor};\n    stroke-width: ${options.leafStrokeWidth};\n    fill: ${options.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${options.labelColor};\n    font-size: ${options.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${options.valueColor};\n    font-size: ${options.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${options.titleColor};\n    font-size: ${options.titleFontSize};\n  }\n  `;\n}, \"getStyles\");\nvar styles_default = getStyles;\n\n// src/diagrams/treemap/diagram.ts\nvar diagram = {\n  parser,\n  get db() {\n    return new TreeMapDB();\n  },\n  renderer,\n  styles: styles_default\n};\nexport {\n  diagram\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}